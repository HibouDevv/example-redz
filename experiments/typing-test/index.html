<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Typing Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #f5f5f5;
        }
        .container {
            width: 600px;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
        .text {
            font-size: 24px;
            letter-spacing: 1px;
            margin-bottom: 20px;
        }
        .input {
            font-size: 24px;
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 5px;
            outline: none;
        }
        .correct { color: black; }
        .incorrect { color: red; }
        .button {
            margin-top: 10px;
            padding: 10px 20px;
            font-size: 16px;
            border: none;
            background-color: #007bff;
            color: white;
            border-radius: 5px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="container">
        <p class="text" id="text"></p>
        <input type="text" class="input" id="input" autofocus>
        <p id="stats">WPM: Not Done | Accuracy: Not Done</p>
        <button class="button" id="restart">Repeat Test</button>
    </div>
    
    <script>
        const sentences = [
            "The quick brown fox jumps over the lazy dog. Practice makes perfect in every aspect of life.",
            "Typing tests help improve your speed and accuracy. Focus on precision before increasing speed.",
            "JavaScript is a powerful and flexible programming language. It is widely used for web development.",
            "Reading books can improve your vocabulary and comprehension. Knowledge is a treasure that grows over time.",
            "Consistent practice leads to mastery in any skill. Stay patient and persistent on your journey to improvement."
        ];

        let textElement = document.getElementById("text");
        let inputField = document.getElementById("input");
        let statsElement = document.getElementById("stats");
        let restartButton = document.getElementById("restart");
        let currentSentence, textSpans, startTime, totalChars, correctChars;

        function loadNewSentence() {
            currentSentence = sentences[Math.floor(Math.random() * sentences.length)];
            textElement.innerHTML = currentSentence
                .split("")
                .map(char => `<span>${char}</span>`)
                .join("");
            textSpans = document.querySelectorAll("#text span");
            inputField.value = "";
            inputField.disabled = false;
            statsElement.innerText = "WPM: Not Done | Accuracy: Not Done";
            startTime = null;
            totalChars = currentSentence.length;
            correctChars = 0;
            inputField.focus();
        }

        inputField.addEventListener("input", function() {
            if (!startTime) startTime = new Date();
            let inputText = inputField.value.split("");
            correctChars = 0;
            let incorrectCount = 0;
            
            textSpans.forEach((span, index) => {
                if (inputText[index] === undefined) {
                    span.className = "";
                } else if (inputText[index] === span.innerText) {
                    span.className = "correct";
                    correctChars++;
                } else {
                    span.className = "incorrect";
                    incorrectCount++;
                }
            });
            
            if (inputText.length >= totalChars) {
                let elapsedTime = (new Date() - startTime) / 1000 / 60; // minutes
                let wpm = Math.round((correctChars / 5) / elapsedTime) || 0;
                let accuracy = ((correctChars / totalChars) * 100).toFixed(2);
                statsElement.innerText = `WPM: ${wpm} | Accuracy: ${accuracy}%`;
                inputField.disabled = true;
            }
        });

        restartButton.addEventListener("click", loadNewSentence);

        loadNewSentence();
    </script>
</body>
</html>
