<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>redz' gun gambling!</title>
  <style>
    body {
      background: #121212;
      color: #fff;
      font-family: "Segoe UI", sans-serif;
      text-align: center;
      padding: 2rem;
    }
    h1 {
      color: #f39c12;
    }
    button {
      padding: 1rem 2rem;
      font-size: 1.2rem;
      background-color: #27ae60;
      color: white;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      margin: 0.5rem;
      transition: 0.2s;
    }
    button:hover {
      background-color: #1e8449;
    }
    .gun-roll {
      font-size: 2rem;
      margin: 1rem auto;
      height: 60px;
    }
    .gun-name {
      font-weight: bold;
      font-size: 1.5rem;
    }
    .rarity-common {
      color: gray;
    }
    .rarity-rare {
      color: #00bfff;
    }
    .rarity-epic {
      color: violet;
    }
    .rarity-legendary {
      color: gold;
    }
    .inventory {
      margin-top: 2rem;
    }
    .inventory-item {
      margin: 5px 0;
    }
    #resetButton {
      margin-top: 2rem;
      background-color: #c0392b;
    }
    #resetButton:hover {
      background-color: #922b21;
    }
  </style>
</head>
<body>

  <h1>ðŸ”« Gun Gambling Game</h1>
  <div id="money">ðŸ’° Money: $0</div>
  <button onclick="gamble()">Gamble!</button>
  <button onclick="toggleAutoRoll()" id="autoRollBtn">Auto Roll: OFF</button>

  <div class="gun-roll" id="rollingText">Ready to roll...</div>

  <h2>Your Inventory</h2>
  <div id="rarityCounts" style="margin-bottom: 1rem; font-size: 1rem; color: #ccc;"></div>
  <div class="inventory" id="inventoryList"></div>

  <button id="resetButton" onclick="resetData()">Reset Data</button>

  <script>
    const rollCost = 1000;
    const defaultMoney = 9999999;
    let autoRoll = false;
    let autoRollInterval;

    const guns = [/* same guns list omitted here for brevity â€“ keep yours unchanged */];

    const rarityChances = {
      common: 0.5,
      rare: 0.3,
      epic: 0.15,
      legendary: 0.05
    };

    let money = parseInt(localStorage.getItem("money")) || defaultMoney;
    let inventory = [];

    function updateMoney() {
      document.getElementById('money').textContent = `ðŸ’° Money: $${money.toLocaleString()}`;
      localStorage.setItem("money", money);
    }

    function updateInventory() {
      const inv = document.getElementById("inventoryList");
      const rarityCounts = { common: 0, rare: 0, epic: 0, legendary: 0 };
      inv.innerHTML = "";
      inventory.forEach(gun => {
        const div = document.createElement("div");
        div.className = `inventory-item rarity-${gun.rarity}`;
        div.textContent = `${gun.name} (${gun.rarity.toUpperCase()})`;
        inv.appendChild(div);
        rarityCounts[gun.rarity]++;
      });
      document.getElementById("rarityCounts").textContent = 
        `${rarityCounts.common} Common, ${rarityCounts.rare} Rare, ` +
        `${rarityCounts.epic} Epic, ${rarityCounts.legendary} Legendary`;
      localStorage.setItem("gun_inventory", JSON.stringify(inventory));
    }

    function getRandomGun() {
      const rand = Math.random();
      let sum = 0;
      for (const rarity in rarityChances) {
        sum += rarityChances[rarity];
        if (rand < sum) {
          const gunsOfRarity = guns.filter(g => g.rarity === rarity);
          return gunsOfRarity[Math.floor(Math.random() * gunsOfRarity.length)];
        }
      }
      return guns[0];
    }

    function gamble(callback) {
      if (money < rollCost) {
        alert("You're out of money!");
        toggleAutoRoll(false);
        return;
      }

      money -= rollCost;
      updateMoney();

      const rollingText = document.getElementById("rollingText");
      rollingText.textContent = "Rolling...";
      let counter = 0;
      const spinInterval = setInterval(() => {
        const fakeGun = guns[Math.floor(Math.random() * guns.length)];
        rollingText.className = `gun-roll rarity-${fakeGun.rarity}`;
        rollingText.textContent = fakeGun.name;
        counter++;
        if (counter >= 15) {
          clearInterval(spinInterval);
          const realGun = getRandomGun();
          rollingText.className = `gun-roll rarity-${realGun.rarity}`;
          rollingText.textContent = `ðŸŽ‰ You got: ${realGun.name} (${realGun.rarity.toUpperCase()})`;
          inventory.push(realGun);
          updateInventory();
          if (callback) callback();
        }
      }, 75);
    }

    function toggleAutoRoll(forceOff = false) {
      autoRoll = forceOff ? false : !autoRoll;
      const btn = document.getElementById("autoRollBtn");
      btn.textContent = `Auto Roll: ${autoRoll ? "ON" : "OFF"}`;

      if (autoRoll) {
        autoRollInterval = setInterval(() => {
          if (money < rollCost) {
            toggleAutoRoll(true);
          } else {
            gamble();
          }
        }, 1500); // 1.5 seconds per roll
      } else {
        clearInterval(autoRollInterval);
      }
    }

    function loadInventory() {
      const saved = localStorage.getItem("gun_inventory");
      if (saved) {
        try {
          inventory = JSON.parse(saved);
          updateInventory();
        } catch {
          inventory = [];
        }
      }
    }

    function resetData() {
      if (confirm("Are you sure you want to reset your data?")) {
        localStorage.removeItem("gun_inventory");
        localStorage.removeItem("money");
        inventory = [];
        money = defaultMoney;
        updateMoney();
        updateInventory();
        location.reload();
      }
    }

    updateMoney();
    loadInventory();
  </script>

</body>
</html>
